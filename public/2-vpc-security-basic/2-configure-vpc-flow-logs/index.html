<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.0" />
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Configure VPC Flow Logs :: Amazon VPC Setup</title>

    
    <link href="/css/nucleus.css?1611464005" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1611464005" rel="stylesheet">
    <link href="/css/hybrid.css?1611464005" rel="stylesheet">
    <link href="/css/featherlight.min.css?1611464005" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1611464005" rel="stylesheet">
    <link href="/css/auto-complete.css?1611464005" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1611464005" rel="stylesheet">
    <link href="/css/theme.css?1611464005" rel="stylesheet">
    <link href="/css/hugo-theme.css?1611464005" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1611464005" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1611464005"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2-vpc-security-basic/2-configure-vpc-flow-logs/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1611464005"></script>
<script type="text/javascript" src="/js/auto-complete.js?1611464005"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="/js/search.js?1611464005"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-create-vpc/" title="Create VPC" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/">
          <b>1. </b>Create VPC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/1-create-vpc/1-vpc-introduction/" title="VPC Introduction" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/1-vpc-introduction/">
          <b>1.1. </b>VPC Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-create-vpc/2-create-vpc-subnet/" title="Create VPC Subnet" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/2-create-vpc-subnet/">
          <b>1.2. </b>Create VPC Subnet
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-create-vpc/3-create-internet-gw/" title="Create Internet Gateway" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/3-create-internet-gw/">
          <b>1.3. </b>Create Internet Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-create-vpc/4-create-natgw/" title="Create NAT Gateway" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/4-create-natgw/">
          <b>1.4. </b>Create NAT Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-create-vpc/5-build-simple-lab/" title="Build Simple Lab" class="dd-item 
        
        
        
        ">
      <a href="/1-create-vpc/5-build-simple-lab/">
          <b>1.5. </b>Build Simple Lab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-vpc-security-basic/" title="VPC Security Basic" class="dd-item 
        parent
        
        
        ">
      <a href="/2-vpc-security-basic/">
          <b>2. </b>VPC Security Basic
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-vpc-security-basic/1-configure-nacl-and-sg/" title="Configure NACL &amp; SG" class="dd-item 
        
        
        
        ">
      <a href="/2-vpc-security-basic/1-configure-nacl-and-sg/">
          <b>2.1. </b>Configure NACL &amp; SG
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-vpc-security-basic/2-configure-vpc-flow-logs/" title="Configure VPC Flow Logs" class="dd-item 
        
        active
        
        ">
      <a href="/2-vpc-security-basic/2-configure-vpc-flow-logs/">
          <b>2.2. </b>Configure VPC Flow Logs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-vpc-security-basic/3-setup-site-to-site-vpn/" title="Setup Site to Site VPN" class="dd-item 
        
        
        
        ">
      <a href="/2-vpc-security-basic/3-setup-site-to-site-vpn/">
          <b>2.3. </b>Setup Site to Site VPN
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/660548818043427/"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/2-vpc-security-basic/2-configure-vpc-flow-logs/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/2-vpc-security-basic/2-configure-vpc-flow-logs/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
    

    

    
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Amazon VPC Setup</a> > <a href='/2-vpc-security-basic/'>VPC Security Basic</a> > Configure VPC Flow Logs
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Configure VPC Flow Logs
            </h1>
          

        



	<p>You can create flow logs for your VPCs, subnets, or network interfaces. Flow logs can publish data to CloudWatch Logs or Amazon S3.</p>
<p><strong>Contents:</strong></p>
<ul>
<li><a href="#1-publishing-flow-logs-to-cloudwatch-logs">1. Publishing flow logs to CloudWatch Logs</a></li>
<li><a href="#2-publishing-flow-logs-to-amazon-s3">2. Publishing flow logs to Amazon S3</a></li>
<li><a href="#3-viewing-flow-logs">3. Viewing flow logs</a></li>
</ul>
<h4 id="1-publishing-flow-logs-to-cloudwatch-logs">1. Publishing flow logs to CloudWatch Logs</h4>
<p>When publishing to CloudWatch Logs, flow log data is published to a log group, and each network interface has a unique log stream in the log group. Log streams contain flow log records. You can create multiple flow logs that publish data to the same log group. If the same network interface is present in one or more flow logs in the same log group, it has one combined log stream. If you&rsquo;ve specified that one flow log should capture rejected traffic, and the other flow log should capture accepted traffic, then the combined log stream captures all traffic.</p>
<p><strong>Create an IAM role for flow logs</strong></p>
<ul>
<li>Open the IAM console at <a href="https://console.aws.amazon.com/iam/">https://console.aws.amazon.com/iam/</a></li>
<li>In the navigation pane, choose <strong>Roles, Create role</strong>.</li>
<li>Choose <strong>EC2</strong> as the service to use this role. For <strong>Use case</strong>, choose <strong>EC2</strong>. Choose <strong>Next: Permissions</strong>.</li>
<li>On the <strong>Attach permissions policies</strong> page, choose <strong>Next: Tags</strong> and optionally add tags. Choose <strong>Next: Review</strong>.</li>
<li>Enter a name for your role (for example, Flow-Logs-Role) and optionally provide a description. Choose <strong>Create role</strong>.</li>
<li>Select the name of your role. For <strong>Permissions</strong>, choose <strong>Add inline policy, JSON</strong>.</li>
<li>Copy the below policy and paste it in the window. Choose Review policy.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;2012-10-17&#34;</span>,
  <span style="color:#f92672">&#34;Statement&#34;</span>: [
    {
      <span style="color:#f92672">&#34;Action&#34;</span>: [
        <span style="color:#e6db74">&#34;logs:CreateLogGroup&#34;</span>,
        <span style="color:#e6db74">&#34;logs:CreateLogStream&#34;</span>,
        <span style="color:#e6db74">&#34;logs:PutLogEvents&#34;</span>,
        <span style="color:#e6db74">&#34;logs:DescribeLogGroups&#34;</span>,
        <span style="color:#e6db74">&#34;logs:DescribeLogStreams&#34;</span>
      ],
      <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
      <span style="color:#f92672">&#34;Resource&#34;</span>: <span style="color:#e6db74">&#34;*&#34;</span>
    }
  ]
}   
</code></pre></div><ul>
<li>Enter a name for your policy, and choose <strong>Create policy</strong>.</li>
<li>Select the name of your role. For <strong>Trust relationships</strong>, choose <strong>Edit trust relationship</strong>. In the existing policy document, change the service from <code>ec2.amazonaws.com</code> to <code>vpc-flow-logs.amazonaws.com</code>. Choose <strong>Update Trust Policy</strong>.</li>
<li>On the <strong>Summary</strong> page, note the ARN for your role. You need this ARN when you create your flow log.</li>
</ul>
<p><strong>Creating a flow log that publishes to CloudWatch Logs</strong></p>
<ul>
<li>Open the Amazon EC2 console at <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a></li>
<li>In the navigation pane, choose <strong>Network Interfaces</strong> or <strong>Your VPCs</strong> or <strong>Subnets</strong>.</li>
<li>Select one or more network interfaces and choose <strong>Actions, Create flow log</strong>.</li>
<li>For <strong>Filter</strong>, specify the type of IP traffic data to log. Choose <strong>All</strong> to log accepted and rejected traffic, <strong>Rejected</strong> to record only rejected traffic, or <strong>Accepted</strong> to record only accepted traffic.</li>
<li>For <strong>Maximum aggregation interval</strong>, choose the maximum period of time during which a flow is captured and aggregated into one flow log record.</li>
<li>For <strong>Destination</strong>, choose <strong>Send to CloudWatch Logs</strong>.</li>
<li>For <strong>Destination log group</strong>, enter the name of a log group in CloudWatch Logs to which the flow logs are to be published. If you specify the name of a log group that does not exist, AWS will create the log group for you.</li>
<li>For <strong>IAM role</strong>, specify the name of the role that has permissions to publish logs to CloudWatch Logs.</li>
<li>For <strong>Format</strong>, specify the format for the flow log record.
<ul>
<li>To use the default flow log record format, choose <strong>AWS default format</strong>.</li>
<li>To create a custom format, choose <strong>Custom format</strong>. For <strong>Log format</strong>, choose the fields to include in the flow log record.</li>
</ul>
</li>
<li>(Optional) Choose <strong>Add Tag</strong> to apply tags to the flow log.</li>
<li>Choose <strong>Create</strong></li>
</ul>
<h4 id="2-publishing-flow-logs-to-amazon-s3">2. Publishing flow logs to Amazon S3</h4>
<p>When publishing to Amazon S3, flow log data is published to an existing Amazon S3 bucket that you specify. Flow log records for all of the monitored network interfaces are published to a series of log file objects that are stored in the bucket. If the flow log captures data for a VPC, the flow log publishes flow log records for all of the network interfaces in the selected VPC.</p>
<p><strong>IAM policy for IAM principals</strong></p>
<p>An IAM principal in your account, such as an IAM user, must have sufficient permissions to publish flow logs to the Amazon S3 bucket. This includes permissions to work with specific logs: actions to create and publish the flow logs. The IAM policy must include the following permissions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;2012-10-17&#34;</span>,
  <span style="color:#f92672">&#34;Statement&#34;</span>: [
    {
      <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
      <span style="color:#f92672">&#34;Action&#34;</span>: [
        <span style="color:#e6db74">&#34;logs:CreateLogDelivery&#34;</span>,
        <span style="color:#e6db74">&#34;logs:DeleteLogDelivery&#34;</span>
        ],
      <span style="color:#f92672">&#34;Resource&#34;</span>: <span style="color:#e6db74">&#34;*&#34;</span>
    }
  ]
}
</code></pre></div><p><strong>Amazon S3 bucket permissions</strong></p>
<p>By default, Amazon S3 buckets and the objects they contain are private. Only the bucket owner can access the bucket and the objects stored in it. However, the bucket owner can grant access to other resources and users by writing an access policy.<br>
If the user creating the flow log owns the bucket, AWS automatically attach the following policy to the bucket to give the flow log permission to publish logs to it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;2012-10-17&#34;</span>,
    <span style="color:#f92672">&#34;Statement&#34;</span>: [
        {
            <span style="color:#f92672">&#34;Sid&#34;</span>: <span style="color:#e6db74">&#34;AWSLogDeliveryWrite&#34;</span>,
            <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
            <span style="color:#f92672">&#34;Principal&#34;</span>: {<span style="color:#f92672">&#34;Service&#34;</span>: <span style="color:#e6db74">&#34;delivery.logs.amazonaws.com&#34;</span>},
            <span style="color:#f92672">&#34;Action&#34;</span>: <span style="color:#e6db74">&#34;s3:PutObject&#34;</span>,
            <span style="color:#f92672">&#34;Resource&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:s3:::bucket_name/optional_folder/AWSLogs/account_id/*&#34;</span>,
            <span style="color:#f92672">&#34;Condition&#34;</span>: {<span style="color:#f92672">&#34;StringEquals&#34;</span>: {<span style="color:#f92672">&#34;s3:x-amz-acl&#34;</span>: <span style="color:#e6db74">&#34;bucket-owner-full-control&#34;</span>}}
        },
        {
            <span style="color:#f92672">&#34;Sid&#34;</span>: <span style="color:#e6db74">&#34;AWSLogDeliveryAclCheck&#34;</span>,
            <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
            <span style="color:#f92672">&#34;Principal&#34;</span>: {<span style="color:#f92672">&#34;Service&#34;</span>: <span style="color:#e6db74">&#34;delivery.logs.amazonaws.com&#34;</span>},
            <span style="color:#f92672">&#34;Action&#34;</span>: <span style="color:#e6db74">&#34;s3:GetBucketAcl&#34;</span>,
            <span style="color:#f92672">&#34;Resource&#34;</span>: <span style="color:#e6db74">&#34;arn:aws:s3:::bucket_name&#34;</span>
        }
    ]
}
</code></pre></div><p><strong>Creating a flow log that publishes to Amazon S3</strong></p>
<ul>
<li>Open the Amazon EC2 console at <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a></li>
<li>In the navigation pane, choose <strong>Network Interfaces</strong> or <strong>Your VPCs</strong> or <strong>Subnets</strong>.</li>
<li>Select one or more network interfaces and choose <strong>Actions, Create flow log</strong>.</li>
<li>For <strong>Filter</strong>, specify the type of IP traffic data to log. Choose <strong>All</strong> to log accepted and rejected traffic, <strong>Rejected</strong> to record only rejected traffic, or <strong>Accepted</strong> to record only accepted traffic.</li>
<li>For <strong>Maximum aggregation interval</strong>, choose the maximum period of time during which a flow is captured and aggregated into one flow log record.</li>
<li>For <strong>Destination</strong>, choose <strong>Send to an Amazon S3 bucket</strong>.</li>
<li>For <strong>S3 bucket ARN</strong>, specify the Amazon Resource Name (ARN) of an existing Amazon S3 bucket. You can include a subfolder in the bucket ARN. The bucket cannot use AWSLogs as a subfolder name, as this is a reserved term.</li>
<li>For <strong>Format</strong>, specify the format for the flow log record.
<ul>
<li>To use the default flow log record format, choose <strong>AWS default format</strong>.</li>
<li>To create a custom format, choose <strong>Custom format</strong>. For <strong>Log format</strong>, choose the fields to include in the flow log record.</li>
</ul>
</li>
<li>(Optional) Choose <strong>Add Tag</strong> to apply tags to the flow log.</li>
<li>Choose <strong>Create</strong></li>
</ul>
<h4 id="3-viewing-flow-logs">3. Viewing flow logs</h4>
<ul>
<li>Open the Amazon EC2 console at <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a></li>
<li>In the navigation pane, choose <strong>Network Interfaces</strong> or <strong>Your VPCs</strong> or <strong>Subnets</strong>.</li>
<li>Select a network interface, and choose <strong>Flow Logs</strong>. Information about the flow logs is displayed on the tab. The <strong>Destination type</strong> column indicates the destination to which the flow logs are published.</li>
</ul>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/2-vpc-security-basic/1-configure-nacl-and-sg/" title="Configure NACL &amp; SG"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/2-vpc-security-basic/3-setup-site-to-site-vpn/" title="Setup Site to Site VPN" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1611464005"></script>
    <script src="/js/perfect-scrollbar.min.js?1611464005"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1611464005"></script>
    <script src="/js/jquery.sticky.js?1611464005"></script>
    <script src="/js/featherlight.min.js?1611464005"></script>
    <script src="/js/highlight.pack.js?1611464005"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1611464005"></script>
    <script src="/js/learn.js?1611464005"></script>
    <script src="/js/hugo-learn.js?1611464005"></script>

    <link href="/mermaid/mermaid.css?1611464005" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1611464005"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
