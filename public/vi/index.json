[
{
	"uri": "/vi/1-create-vpc/",
	"title": "Khởi tạo VPC",
	"tags": [],
	"description": "",
	"content": "Table of Contents  Giới thiệu VPC VPC Subnet Internet Gateway NAT Gateway Thực hành Cơ bản  Các bước 1.1 , 1.2 , 1.3 , 1.4 để tham khảo cho bài Thực hành cơ bản 1.5 , các bạn có thể đọc các mục 1.2, 1.3, 1.4 và làm thực hành 1.5\n"
},
{
	"uri": "/vi/",
	"title": "Thiết lập VPC",
	"tags": [],
	"description": "",
	"content": "Nội dung  Khởi tạo VPC Bảo mật VPC Cơ bản  "
},
{
	"uri": "/vi/2-vpc-security-basic/1-configure-nacl-and-sg/",
	"title": "Cấu hình NACL &amp; SG",
	"tags": [],
	"description": "",
	"content": "Một security group hoạt động như một tường lửa ảo cho Instance, giúp kiểm soát lưu lượng truy cập. Một Instance trong VPC có thể được gán tối đa 5 Security group do SG chỉ hoạt động ở tầng Instance mà không họat động ở tầng Subnet.\nSecurity groups hoạt động ở mức máy ảo, không phải ở mức subnet. Tuy nhiên, mỗi máy ảo trong một subnet có thể được gán với nhiều bộ Security group khác nhau,\n\rDanh sách kiểm soát truy cập mạng (ACL) là lớp bảo mật tùy chọn cho VPC, nó hoạt động như một tường lửa để kiểm soát lưu lượng ra và vào cho một hoặc nhiều subnet. Ta có thể thiết lập network ACL với các rule tương tự như security groups, nhằm bổ sung thêm một lớp bảo mật nữa cho VPC.\nNội dung:\n Security groups Network ACLs cho VPC  "
},
{
	"uri": "/vi/1-create-vpc/1-vpc-introduction/",
	"title": "Giới thiệu VPC",
	"tags": [],
	"description": "",
	"content": "Amazon Virtual Private Cloud (Amazon VPC) dịch theo nghĩa đen là “Đám mây Riêng tư Ảo” là một mạng ảo tùy chỉnh nằm bên trong AWS Cloud và tách biệt (hoặc cô lập) mạng Ảo của riêng bạn với toàn bộ thế giới bên ngoài. Khái niệm này tương tự như việc thiết kế và triển khai một mạng độc lập riêng biệt mà hoạt động trong một trung tâm dữ liệu on-premise, loại hình vẫn còn rất phổ biến hiện nay tại Việt Nam.\nBên trong VPC tùy chỉnh đó, bạn có toàn quyền kiểm kiểm soát môi trường mạng ảo của mình, nghĩa là vừa có khả năng khởi tạo và chạy các tài nguyên AWS, vừa có thể lựa chọn phạm vi địa chỉ IP, tạo các mạng con và cấu hình các bảng định tuyến và cổng kết nối mạng. Bạn có thể sử dụng cả IPv4 và IPv6 để truy cập an toàn và dễ dàng vào tài nguyên và ứng dụng trong VPC.\nRegion là khái niệm mô tả một trung tâm dữ liệu cực lớn của AWS đặt tại một vùng lãnh thổ nhất định. Trong một region, ta có thể tạo ra nhiều VPC và mỗi VPC được phân biệt nhau bởi những dải không gian địa chỉ IP khác nhau. Ta chỉ định phạm vi địa chỉ IPv4 bằng cách lựa chọn a Classless Inter-Domain Routing (CIDR), chẳng hạn như 10.0.0.0/16. Phạm vi địa chỉ của Amazon VPC không thể thay đổi sau khi nó đã được tạo. Phạm vi địa chỉ Amazon VPC có thể lớn bằng /16 (tức 65536 địa chỉ khả dụng) hoặc nhỏ bằng /28 (tức 16 địa chỉ khả dụng) và chúng không được phép trùng với bất kỳ mạng nào khác mà chúng sẽ được kết nối tới.\nDịch vụ Amazon VPC được ra mắt sau dịch vụ Amazon EC2, vì vậy mà có thời điểm AWS cung cấp hai nền tảng mạng khác nhau đó là EC2-Classic và EC2-VPC. EC2-Classic là nền tảng mạng đầu tiên, trong đó tất cả Amazon EC2 được tạo ra đều nằm trong một mạng phẳng duy nhất, chia sẻ kết nối giữa các khách hàng của AWS. Cho tới tháng 12 năm 2013, AWS chỉ còn hỗ trợ EC2-VPC với VPC mặc định được tạo ra ở mỗi Region cùng một subnet mặc định với CIDR block có giá trị là 172.31.0.0/16.\nMột Amazon VPC bao gồm các thành phần sau\n Subnets Route tables Dynamic Host Configuration Protocol (DHCP) option sets Security groups Network Access Control Lists (ACLs)  Bên cạnh đó là các thành phần bổ sung như:\n Internet Gateways (IGWs) Elastic IP (EIP) addresses Elastic Network Interfaces (ENIs) Endpoints Peering Network Address Translation (NATs) instances and NAT gatewaysVirtual Private Gateway (VPG), Customer Gateways (CGWs), and Virtual Private Networks (VPNs)  Nội dung:\n Khởi tạo VPC thông qua Bảng điều khiển  Khởi tạo VPC thông qua Bảng điều khiển  Truy cập trang Amazon VPC tại https://console.aws.amazon.com/vpc/ Trên thanh điều hướng, chọn Your VPCs, Create VPC. Khai báo thông tin khởi tạo VPC sau đó chọn Create.  Name tag: thông tin Name cho VPC. Đây là thông tin tùy chọn.  IPv4 CIDR block: khai báo dải địa chỉ IPv4 CIDR cho VPC. Tốt nhất ta nên chọn IPv4 CIDR nằm trong dải Private đã được quy định trong RFC 1918; ví dụ, 10.0.0.0/16, hoặc 192.168.0.0/16. IPv6 CIDR block: đây là thông tin tùy chọn và có thể lấy từ các nguồn sau:  Amazon-provided IPv6 CIDR block: Lấy dải IPv6 CIDR từ Amazon\u0026rsquo;s pool. IPv6 CIDR owned by me: (BYOIP) sử dụng dải địa chỉ IPv6 sở hữu.     Tenancy: lựa chọn Dedicated tenancy mang ý nghĩa Intance sẽ được chạy trên phần cứng single-tenant duy nhất.    "
},
{
	"uri": "/vi/2-vpc-security-basic/1-configure-nacl-and-sg/1-sg/",
	"title": "Security Group",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n Cơ bản về Security group Security group Rule Tạo một Security Group Thêm rule vào Security Group  Cơ bản về Security group Một số đặc điểm cơ bản của Security group:\n Chỉ có thể thêm vào các Allow rule, mà không thể bổ sung Deny rule. Có thể chỉ định các rule riêng biệt cho lưu lượng truy cập đi ra hoặc đi vào. Một Security group mới được tạo ra không có sẵn Inbound rules. Do đó, tại thời điểm ban đầu Instance sẽ không cho phép bất cứ lưu lượng truy cập nào được phép đi vào, đòi hỏi ta phải bổ sung Inbound rule để cấp phép truy cập. Mặc định, Security group có sẵn Outbound rule cho phép mọi lưu lượng được phép đi ra khỏi Instance. Rule này có thể được chỉnh sửa (xóa) và bổ sung các Outbound rule cụ thể, chỉ rõ lưu lượng nào xuất phát từ Instance được phép đi ra ngoài. Nếu SG không có Outbound rule thì không một lưu lượng nào được phép đi ra khởi Instance. Security groups là một dịch vụ Stateful - nghĩa là nếu lưu lượng đi vào Instance đã được cấp phép thì lưu lượng cũng có thể đi ra ngoài Instance, và ngược lại, bất kể Outbound rule như thế nào. Các Instance chỉ có thể giao tiếp được với nhau khi và chỉ khi chúng được liên kết với Security group cho phép kết nối, hoặc Security group mà Instance có liên kết chứa Rule cho phép lưu lượng try cập (ngoại trừ Security group mặc định với có các rule mặc định cho phép toàn bộ lưu lượng được truy cập). Security group được liên kết với các network interface. Sau khi Instance đã được khởi tạo, ta vẫn có thể thay đổi Security group đã được gán với Instance, điều này cũng thay đổi security group đang được gán với primary network interface tương ứng.  Security group Rule Rule được sinh ra để cấp quyền truy cập cho lưu lượng đi vào hoặc đi ra khỏi Instance. Quyền truy cập này có thể được áp dụng cho một CIDR cụ thể hoặc cho một Security group nằm trong cùng một VPC hoặc nằm trong một VPC khác nhưng có kết nối peering đã được khởi tạo.\nCác thành phần cơ bản của Security group rule:\n (Chỉ đối với Inbound rules) gồm điểm xuất phát (nguồn) của lưu lượng truy cập và port đích hoặc dải port. Nguồn có thể là một security group khác, là một dải IPv4 hoặc IPv6 CIDR hoặc đơn thuẩn là một địa chỉ IPv4 hoặc IPv6. (Chỉ đối với Outbound rules) gồm đích đến của lưu lượng và port đích hay dải port đích. Đích đến có thể là một security group khác, là một dải IPv4 hoặc IPv6 CIDR hoặc đơn thuẩn là một địa chỉ IPv4 hoặc IPv6 hoặc là một dịch vụ bắt đầu bằng một tiền tố (ví dụ: igw_xxx) nằm trong danh sách prefix ID(một dịch vụ được xác định bởi prefix ID - tên và ID của dịch vụ khả dụng trong region). Mọi giao thức đều có một số giao thức chuẩn. Ví dụ: SSH là 22,..  Tạo một Security Group  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Security Groups trong mục Security. Chọn Create Security Group.  Tên Security Group: Ví dụ: my-security-group Mô tả: Mô tả về Security Group. Chọn ID của VPC mà ta muốn Chọn Yes, Create.    Thêm rule vào Security Group  Truy cập Amazon VPC console tại địa chỉhttps://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Security Groups. Chọn security group mà ta muốn cập nhật. Chọn Actions, Edit inbound rules hoặc Actions, Edit outbound rules. Phần Type, chọn loại lưu lượng, sau đó điền các thông tin cần thiết. Ta cũng có thể cấp phép kết nối giữa các Instance thuộc các security group khác nhau. Ví dụ để tạo inbound rule ta cần thực hiện như sau:  Type: All Traffic Source: Chúng ta có thể chọn nguồn kết nối từ IP của chúng ta (My IP), Anywhere hoặc Tùy chỉnh (Custom).   Chọn Save rules.  "
},
{
	"uri": "/vi/2-vpc-security-basic/3-setup-site-to-site-vpn/1-deploy-infra/",
	"title": "Triển khai hạ tầng",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n 1. Cấu hình Network 2. Khởi tạo EC2 trên mỗi VPC  1. Cấu hình Network Đầu tiên chúng ta sẽ tạo Elastic IP chuẩn bị cho NAT Gateway:\n Truy cập VPC Console, chọn Elastic IPs và chọn Allocate Elastic IP address. Chọn Allocate để tạo Elastic IP.  Bây giờ truy cập vào VPC Dashboard để tạo một VPC mới:\n Chọn Launch VPC Wizard  Trong trang Step 1: Select a VPC Configuration, chọn VPC with Public and Private Subnets Chọn Select Trong trang Step 2: VPC with Public and Private Subnets, nhập thông tin bên dưới:  IPv4 CIDR block: 10.10.0.0/16 VPC name: LabVPC Public subnet\u0026rsquo;s IPv4 CIDR: 10.10.0.0/24 Public subnet name: Public subnet Private subnet\u0026rsquo;s IPv4 CIDR: 10.10.3.0/24 Private subnet name: Private subnet Elastic IP Allocation ID: Chọn Elastic IP đã tạo trước đó. Để các thiết lập khác ở giá trị mặc định.    Chọn Create VPC để tạo VPC.  2. Khởi tạo EC2 trên mỗi VPC Tạo Security Group cho EC2\n Truy cập EC2 Console, chọn Create security group. Trong trang Create security group, nhập thông tin bên dưới:  Security group name: Private-EC2-SG Description: Private-EC2-SG VPC: Chọn VPC đã tạo trước đó Ở mục Inbound rules, chọn Add rule và thêm các rule sau:  Type: SSH | Source: My IP Type: All Traffic | Source: Custom 10.28.0.0/16     Chọn Create security group.  Khởi chạy EC2 trong LabVPC\n Truy cập EC2 Console, chọn Instances và chọn Launch instances.  Thực hiện cấu hình theo các bước hướng dẫn và nhập các thông tin bên dưới:  AMI: Amazon Linux 2 AMI (HVM), SSD Volume Type Instance type: t2.micro Network: LabVPC Subnet: Private subnet Auto-assign Public IP: Disable Network interfaces \u0026gt; Primary IP: 10.10.3.100 Security group: Private-EC2-SG Để các thiết lập khác ở giá trị mặc định.   Chọn Review and Launch Kiểm tra thông tin cấu hình EC2 và chọn Launch.  Trong hộp thoại Select an existing key pair or create a new key pair, tạo mới một keypair:  Chọn Create a new key pair Key pair name: ec2-keypair    Chọn Launch Instances  "
},
{
	"uri": "/vi/2-vpc-security-basic/2-configure-vpc-flow-logs/1-publish-cw-logs/",
	"title": "Đẩy Flow Log lên CW Logs",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n Tạo IAM role cho flow logs Tạo Luồng dữ liệu nhật kí hiển thị trên CloudWatch Logs Xem nội dung Luồng dữ liệu nhật ký  Tạo IAM role cho flow logs  Truy cập trang IAM tại địa chỉ https://console.aws.amazon.com/iam/ Trên thanh điều hướng bên trái, chọn Roles, Create role. Trong phần Type of trusted entity chọn **AWS service: EC2, Lambda and others **. Đối với Use case, chọn EC2. Tiếp tục Next: Permissions. Tại trang Attach permissions policies, chọn Next: Tags rồi nhập thông tin tag (nếu cần). Chọn tiếp Next: Review. Nhập tên Role (ví dụ Flow-Logs-Role), nếu cần thiết có thể bổ sung thêm mô tả. Chọn Create role. Chọn tên Role. Trong phần Permissions, chọn Add inline policy, JSON. Sao chép policy bên dưới rồi chọn Review policy.  { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Action\u0026#34;: [ \u0026#34;logs:CreateLogGroup\u0026#34;, \u0026#34;logs:CreateLogStream\u0026#34;, \u0026#34;logs:PutLogEvents\u0026#34;, \u0026#34;logs:DescribeLogGroups\u0026#34;, \u0026#34;logs:DescribeLogStreams\u0026#34; ], \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; } ] }  Nhâp tên policy, rồi chọn Create policy. Chọn tên của role. Trong phần Trust relationships, chọn Edit trust relationship sau đó thay đổi service từ ec2.amazonaws.com sang vpc-flow-logs.amazonaws.com. Rồi chọn Update Trust Policy. Tại trang Summary, lưu lại thông tin ARN role bởi nó sẽ được sử dụng cho việc tạo flow log sau này.  Tạo Luồng dữ liệu nhật kí hiển thị trên CloudWatch Logs  Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Network Interfaces or Your VPCs or Subnets. Chọn một hoặc nhiều network interfaces rồi chọn Actions, Create flow log. Trong phần Filter, chọn loại dữ liệu sẽ được ghi nật ký. Sau đó chọn All để ghi nhận dữ liệu của mọi traffic được cho phép hoặc bị từ chối. Cụ thể Rejected là lựa chọn để ghi lại lưu lượng dữ liệu bị từ chối, hoặc Accepted để ghi lại lưu lượng dữ liệu được cho phép. Phần Maximum aggregation interval*, chỉ định khoảng thời gian mà dữ liệu nhật ký được ghi lại và tổng hợp thành bản ghi dữ liệu nhật ký. Mục Destination, chọn Send to CloudWatch Logs. Mục Destination log group, nhập tên của log group - nơi chưa dữ liệu lưu lượng nhật ký. Nếu như chưa tồn tại log group, AWS sẽ tự động tạo một log group làm destination. Mục IAM role, chỉ rõ tên của rile mà có quyền đẩy dữ liệu nhật ký vào CloudWatch Logs. Mục Format, chỉ rõ định dạng của bản ghi dữ liệu nhật ký.  Nếu muốn sử dụng định dạng mặc định thì chọn AWS default format. Trường hợp muốn sử dụng định dạng mới chọn Custom format. Phần Log format, nhập định dạng bản ghi dữ liệu nhật ký bạn mong muốn.   (Tùy chọn) Bấm Add Tag để thêm tag cho luồng dữ liệu nhật ký. Bấm Create  Xem nội dung Luồng dữ liệu nhật ký  Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Network Interfaces or Your VPCs or Subnets. Chọn một network interface, rồi chọn Flow Logs. Thông tin về Luồng dữ liệu nhật ký sẽ được hiển thị trong tab này.Cột Destination type chỉ rõ destination của luồng dữ liệu nhật ký được đưa lên.  "
},
{
	"uri": "/vi/2-vpc-security-basic/",
	"title": "Bảo mật VPC Cơ bản",
	"tags": [],
	"description": "",
	"content": "Nội dung  NACL \u0026amp; SG Cấu hình VPC Flow Logs Cấu hình Site-to-Site VPN  "
},
{
	"uri": "/vi/2-vpc-security-basic/3-setup-site-to-site-vpn/2-config-vpn/",
	"title": "Cấu hình Site-to-Site VPN",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n 1. Cấu hình Site to Site VPN 2. Cấu hình Site-to-Site VPN trên Customer Gateway (OpenSwan)  1. Cấu hình Site to Site VPN Tạo Virtual Private Gateway\n Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/, chọn Virtual Private Gateway.  Chọn Create Virtual Private Gateway và tạo với thông tin.  Name tag: VPNGateway    Trong danh sách các Virtual Private Gateway, chọn vào VPNGateway vừa tạo. Chọn Actions \u0026gt; Attach to VPC. Chọn VPC đã tạo ở bước trước. (LabVPC)  Tạo \u0026amp; cấu hình Customer Gateway\n Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/, chọn Customer Gateway.  Chọn Create Customer Gateway và tạo với thông tin:  Name: CustomerGateway Routing: Static IP Address: Nhập địa chỉ IP Public của VPN Gateway ở phía Onprem của bạn.   Chọn Create Customer Gateway.  Tạo \u0026amp; cấu hình kết nối Site-to-Site trên AWS\n Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/, chọn Site-to-Site VPN Connections. Chọn Create VPN Connection và tạo với thông tin:  Name tag: VPNConnection Target Gateway Type: Chọn Virtual Private Gateway Virtual Private Gateway: Chọn VPNGateway Customer Gateway: Existing Customer Gateway ID:\tChọn CustomerGateway Routing Options: Static Static IP Prefixes: 10.28.0.0/16 Các cấu hình khác giữ nguyên mặc định.   Chọn Create VPN Connection.  Cấu hình Route Table\n Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/, chọn Route Tables. Chọn các Route Table trong LabVPC. Chọn tab Route Propagation Chọn Edit route propagation Chọn vào ô Propagate Chọn Save để lưu Route Table.  2. Cấu hình Site-to-Site VPN trên Customer Gateway (OpenSwan) Để tải tập tin cấu hình cho VPN Connection ở phía On-premise. Bạn có thể tải Template từ phía AWS cung cấp:\n Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/, chọn Site-to-Site VPN Connection. Chọn VPN Connection đã tạo, sau đó chọn Download Configuration. Trong hộp thoại Download Configuration, lựa chọn appliance phù hợp với bạn: Trong bài thực hành này, chúng ta sẽ sử dụng OpenSwan.  Vendor:\tChọn OpenSwan Platform:\tChọn OpenSwan Software:\tChọn OpenSwan 2.6.38+    Sau đó dựa vào cấu hình được cung cấp, bạn thay đổi các thông tin phù hợp và cấu hình cho thiết bị của mình.\n Cài đặt OpenSwan  sudo su yum install openswan -y  Cấu hình /etc/ipsec.conf Bỏ dấu # phía trước cấu hình bên dưới.  include /etc/ipsec.d/*.conf  Cấu hình /etc/sysctl.conf Thêm cấu đoạn sau vào cuối tập tin cấu hình.  net.ipv4.ip_forward = 1 net.ipv4.conf.all.accept_redirects = 0 net.ipv4.conf.all.send_redirects = 0 Sau đó để áp dụng cấu hình này, bạn chạy lệnh:\nsysctl -p  Cấu hình /etc/ipsec.d/aws.conf Thêm cấu đoạn sau vào tập tin cấu hình. Chúng ta sẽ tạo 2 Tunnel với thông tin được lấy từ VPN Connection đã tạo trước đó.  conn Tunnel1 authby=secret auto=start left=%defaultroute leftid=54.249.66.228 right=13.114.170.224 type=tunnel ikelifetime=8h keylife=1h phase2alg=aes128-sha1;modp1024 ike=aes128-sha1;modp1024 auth=esp keyingtries=%forever keyexchange=ike leftsubnet=10.28.0.0/16 rightsubnet=10.10.0.0/16 dpddelay=10 dpdtimeout=30 dpdaction=restart_by_peer conn Tunnel2 authby=secret auto=start left=%defaultroute leftid=54.249.66.228 right=52.198.189.177 type=tunnel ikelifetime=8h keylife=1h phase2alg=aes128-sha1;modp1024 ike=aes128-sha1;modp1024 auth=esp keyingtries=%forever keyexchange=ike leftsubnet=10.28.0.0/16 rightsubnet=10.10.0.0/16 dpddelay=10 dpdtimeout=30 dpdaction=restart_by_peer Ghi chú:\nleftid: IP Public Address phía Onprem. right: IP Public Address phía AWS VPN Tunnel. leftsubnet: CIDR của Mạng phía Local (Nếu có nhiều lớp mạng, bạn có thể để là 0.0.0.0/0). rightsubnet: CIDR của Mạng phía Private Subnet trên AWS.  Cấu hình /etc/ipsec.d/aws.secrets Tạo tập tin mới với cấu hình sau để thiết lập chứng thực cho 2 Tunnel.  54.249.66.228 13.114.170.224: PSK \u0026#34;ZQbWr7AXk1Wy4hv1Y3KcO4orck.DiQz0\u0026#34; 54.249.66.228 52.198.189.177: PSK \u0026#34;8OrmB8M6Jspp6v1yv0ekd89oFM3dNAyC\u0026#34;  Khởi động lại Network service \u0026amp; IPSEC service  service network restart chkconfig ipsec on service ipsec start service ipsec status "
},
{
	"uri": "/vi/2-vpc-security-basic/2-configure-vpc-flow-logs/",
	"title": "Cấu hình VPC Flow Logs",
	"tags": [],
	"description": "",
	"content": "Chúng ta có thể tạo Flow log cho VPC, subnets hoặc network interfaces. Flow log có thể đẩy dữ liệu lên CloudWatch Log hoặc Amazon S3.\nNội dung:\n 1. Đẩy Luồng dữ liệu nhật ký lên CloudWatch Logs 2. Đẩy luồng dữ liệu nhật ký lên Amazon S3  1. Đẩy Luồng dữ liệu nhật ký lên CloudWatch Logs Khi đẩy dữ liệu lên CloudWatch Logs, luồng dữ liệu nhật ký sẽ được đưa vào log group, và mỗi network interface có một luồng dữ liệu nhật ký riêng biệt trong log group. Luồng nhật ký dữ liệu chứa các bản ghi dữ liệu nhật ký lưu lượng. Bạn có thể tạo nhiều luồng dữ liệu nhật ký đẩy vào trong cùng một log group. Nếu một network interface hiển thị trong một hoặc nhiều luồng dữ liệu nhật ký trong cùng một log group thì nó sẽ tạo ra một luồng dữ liệu nhật ký kết hợp. Nếu đã có một luồng dữ liệu nhật ký chỉ bắt lưu lượng bị từ chối và luồng dữ liệu nhật ký khác chỉ bắt lưu lượng được chấp nhận, thì luồng dữ liệu nhật ký kết hợp sẽ bắt dữ liệu của cả 2 luồng lưu lượng trên.\n Đẩy Luồng dữ liệu nhật ký lên CloudWatch Logs\n 2. Đẩy luồng dữ liệu nhật ký lên Amazon S3 Trường hợp bạn muốn đẩy dữ liệu nhất ký lên Amazon S3, thì cẩn đảm bảo bucket đã được tạo sẵn trước khi sử dụng. Các bản ghi dữ liệu nhật ký liên quan tới network interfaces sẽ được lưu trữ thành một loạt các object trên bucket. Trường hợp là dữ liệu nhật ký hoạt động của VPC, luồng dữ liệu nhật kỹ sẽ đẩy dữ liệu của toàn bộ the network interfaces trong VPC đó lên bucket.\n Publishing flow logs to Amazon S3\n "
},
{
	"uri": "/vi/1-create-vpc/2-create-vpc-subnet/",
	"title": "Giới thiệu VPC Subnet",
	"tags": [],
	"description": "",
	"content": "Subnet là một phân đoạn của dải địa chỉ IP Amazon VPC, cung cấp trực tiếp dải mạng hoạt động cho các tài nguyên AWS có thể chạy bên trong nó như Amazon EC2, Amazon RDS (CSDL Quan hệ Amazon),\u0026hellip; Các subnet cũng được xác định thông qua CIDR block (ví dụ: 10.0.1.0/24 và 192.168.0.0/24) và bắt buộc các CIDR của subnet phải nằm trong CIDR của VPC. Subnet nhỏ nhất có thể tạo được là /28 (16 địa chỉ IP). AWS lưu trữ 4 địa chỉ IP đầu tiên và 1 địa chỉ IP cuối cùng của mỗi subnet cho các mục đích kết nối mạng nội bộ. Ví dụ: subnet /28 có 16 địa chỉ IP khả dụng, nhưng loại bỏ 5 reserved IP cho AWS, như vậy còn lại 11 địa chỉ IP có thể sử dụng cho các tài nguyên hoạt động bên trong subnet này.\nAvailability Zone hay được viết tắt thành AZ là một trung tâm dữ liệu con, nằm bên trong Region và được xác định dựa treo vị trí địa lý. Bên trong AZ có thể có một hoặc nhiều subnet, nhưng một subnet chỉ có thể nằm trong duy nhất một AZ mà không thể mở rộng sang AZ khác.\nCác subnet được chia thành các loại như Public, Private, hoặc VPN-only.\n A Public subnet là subnet có route table (sẽ thảo luận sau) điều hướng lưu lượng truy cập bên trong subnet đi tới VPC IGW (cũng sẽ thảo luận sau) A Private subnet thì ngược lại với Public subnet, nó không có route table điều hướng lưu lượng truy cập tới VPC IGW. A VPN-only subnet là subnet mà có route table điều hướng lưu lượng truy cập tới VPG của Amazon VPC (sẽ thảo luận sau).  Bất kể loại mạng con nào, dải địa chỉ IP nội bộ của subnet luôn là private (nghĩa là từ bên ngoài Internet không thể kết nối trực tiếp tới các địa chỉ thuộc dải này).\n"
},
{
	"uri": "/vi/2-vpc-security-basic/1-configure-nacl-and-sg/2-nacl/",
	"title": "Network ACLs",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n Cơ bản về Network ACL Network ACL rules Khởi tạo một network ACL Bổ sung rules vào một network ACL  Cơ bản về Network ACL  VPC sau khi khởi tạo sẽ có sẵn một network ACL mặc định và có thể được sửa đổi. Mặc định, nó cấp phép truy cập cho tất cả lưu lượng truy cập IPv4 hoặc IPv6 có thể đi ra hoặc đi vào VPC. Có thể tạo một network ACL tùy chỉnh và liên kết nó với một subnet. Mặc định các network ACL tùy chỉnh từ chối tất cả lưu lượng truy cập đi vào và đi ra, cho đến khi ta bổ sung rule cấp phép truy cập. Từng subnet trong VPC phải được liên kết với một network ACL. Nếu subnet không được liên kết với một network ACL cụ thể thì subnet sẽ được tự động liên kết với network ACL mặc định. Một network ACL có thể liên kết với nhiều subnet. Tuy nhiên, một subnet chỉ có thể liên kết với một network ACL tại một thời điểm. Khi liên kết network ACL mới với subnet,thì liên kết trước đó sẽ bị xóa. Một network ACL chứa một danh sách các rule được đánh số khác nhau. AWS đánh giá các rule dựa trên số thứ tự được gán, bắt đầu với rule được đánh số thấp nhất, để xác định xem lưu lượng có được phép đi vào hay đi ra khỏi bất kỳ subnet nào được liên kết với network ACL hay không. Số thứ tự lớn nhất có thể được gán cho rule là 32766 (tương đương số lượng rule lớn nhất của một network ACL là 32766). Network ACL có các rule cấp phép đi vào hoặc đi ra tách biệt và rule có thể là cho phép hoặc từ chối lưu lượng. Network ACL là dịch vụ Stateless, nghĩa là phản hồi đối với lưu lượng truy cập được phép đi vào, phải tuân theo rule đối với lưu lượng truy cập đi ra (và ngược lại).  Network ACL rules Có thể thêm hoặc xóa một rule khỏi network ACL mặc định hoặc tạo network ACL mới cho VPC. Khi thêm hoặc xóa một rule khỏi network ACL, các thay đổi sẽ tự động được áp dụng cho các subnet được liên kết với nó.\nCác thành phần của một network ACL rule:\n Rule number. Rule bắt đầu được đánh giá bắt đầu với rule có số thứ tự thấp nhất. Ngay khi rule đó match với lưu lượng truy cập, nó sẽ ngay lập tức được áp dụng cho dù nó mâu thuẫn với một rule nào đó được đánh số lớn hơn trong danh sách. Type.loại lưu lượng, ví dụ SSH. Có thể chỉ định tất cả các loại lưu lượng truy cập hoặc phạm vi tùy chỉnh. Protocol. chỉ định giao thức cùng số giao thức chuẩn. Port range. port hoặc dải port lắng nghe của lưu lượng truy cập. Ví dụ: HTTP là 80. Source. [chỉ đối với Inbound rule] Xuất phát của lưu lượng truy cập (giá trị là dải CIDR). Destination. [chỉ đối với Outbound rule] Điểm đến của lưu lượng truy cập (giá trị là dải CIDR). Allow/Deny. chỉ rõ là Cho phép hoặc Từ chối lưu lượng truy cập.  Khởi tạo một network ACL  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Network ACLs. Chọn Create Network ACL. Trong hộp thoại Create Network ACL,  Điền tên network ACL (tùy chọn) Chọn ID của VPC từ danh sách VPC.   Sau đó bấm Yes, Create.  Bổ sung rules vào một network ACL  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Network ACLs. Trong phần nội dung chi tiết, chọn Inbound Rules hoặc Outbound Rules tab, tìm loại rule mà bạn muốn thêm, sau đó bấm Edit. Trong phần Rule #, nhập số thứ tự của rule. Số thứ tự của rule phải chưa được khai báo trong network ACL. AWS sẽ tiến hành thực thi các rule theo thứ tự từ số thấp nhất tới số lớn nhất. Chọn rule từ danh sách Type của rule. Trong phần Source hoặc Destination, nhập dải CIDR muốn được áp dụng rule. Từ danh sách Allow/Deny, chọn ALLOW để Cho phép hoặc DENY để Từ chối (không cho phép) lưu lượng truy cập. Chọn Save.  "
},
{
	"uri": "/vi/2-vpc-security-basic/2-configure-vpc-flow-logs/2-publish-s3/",
	"title": "Đẩy Flow Log lên S3",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n IAM policy đối với IAM principals Phân quyền đối với bucket của Amazon S3 Tạo luồng dữ liệu nhật ký đẩy lên Amazon S3 Xem nội dung Luồng dữ liệu nhật ký  IAM policy đối với IAM principals Một IAM principal ví dụ như IAM user phải được gán quyền hạn để đẩy dữ liệu nhật ký lên bucket. Cụ thể là quyền tạo và đẩy luồng dữ liệu nhật ký lên destination mong muốn. Ví dụ bên dưới là đoạn json mô tả những quyền cần có đối với một IAM principal.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;logs:CreateLogDelivery\u0026#34;, \u0026#34;logs:DeleteLogDelivery\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; } ] } Phân quyền đối với bucket của Amazon S3 Mặc định bucket và các object nằm bên trong nó đều ở chế độ private và chỉ có bucket owner mới được quyền truy cập. Tuy nhiên thì bucket owner cũng có thể gán quyền cho phép những resource khác hoặc user khác bằng cách chỉnh sửa nội dung chính sách truy cập.\nTrường hợp user tạo luồng dữ liệu nhật ký chính là owner của bucket thì AWS sẽ tự động gán những chính sách bên dưới đây và bucket để cấp quyền đẩy dữ liệu nhật ký lên trên S3.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;AWSLogDeliveryWrite\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: {\u0026#34;Service\u0026#34;: \u0026#34;delivery.logs.amazonaws.com\u0026#34;}, \u0026#34;Action\u0026#34;: \u0026#34;s3:PutObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::bucket_name/optional_folder/AWSLogs/account_id/*\u0026#34;, \u0026#34;Condition\u0026#34;: {\u0026#34;StringEquals\u0026#34;: {\u0026#34;s3:x-amz-acl\u0026#34;: \u0026#34;bucket-owner-full-control\u0026#34;}} }, { \u0026#34;Sid\u0026#34;: \u0026#34;AWSLogDeliveryAclCheck\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: {\u0026#34;Service\u0026#34;: \u0026#34;delivery.logs.amazonaws.com\u0026#34;}, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetBucketAcl\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::bucket_name\u0026#34; } ] } Tạo luồng dữ liệu nhật ký đẩy lên Amazon S3  Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Network Interfaces or Your VPCs or Subnets. Chọn một hoặc nhiều network interfaces rồi chọn Actions, Create flow log. Trong phần Filter, chọn loại dữ liệu sẽ được ghi nật ký. Sau đó chọn All để ghi nhận dữ liệu của mọi traffic được cho phép hoặc bị từ chối. Cụ thể Rejected là lựa chọn để ghi lại lưu lượng dữ liệu bị từ chối, hoặc Accepted để ghi lại lưu lượng dữ liệu được cho phép. Phần Maximum aggregation interval*, chỉ định khoảng thời gian mà dữ liệu nhật ký được ghi lại và tổng hợp thành bản ghi dữ liệu nhật ký. Mục Destination, chọn Send to an Amazon S3 bucket. Phần S3 bucket ARN, điền vào thông tin Amazon Resource Name (ARN) của bucket. Ta cũng có thể thêm vào đường dẫn thư mục con nằm bên trong bucket ARN. Một lưu ý đó à bucket không thể sử dụng AWSLogs làm tên thư mục con do thông tin này đã được reserved cho mục đích sử dụng khác. Mục Format, chỉ rõ định dạng của bản ghi dữ liệu nhật ký.  Nếu muốn sử dụng định dạng mặc định thì chọn AWS default format. Trường hợp muốn sử dụng định dạng mới chọn Custom format. Phần Log format, nhập định dạng bản ghi dữ liệu nhật ký bạn mong muốn.   (Tùy chọn) Bấm Add Tag để thêm tag cho luồng dữ liệu nhật ký. Bấm Create  Xem nội dung Luồng dữ liệu nhật ký  Truy cập trang Amazon VPC console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Network Interfaces or Your VPCs or Subnets. Chọn một network interface, rồi chọn Flow Logs. Thông tin về Luồng dữ liệu nhật ký sẽ được hiển thị trong tab này.Cột Destination type chỉ rõ destination của luồng dữ liệu nhật ký được đưa lên.  "
},
{
	"uri": "/vi/2-vpc-security-basic/3-setup-site-to-site-vpn/",
	"title": "Cấu hình Site-to-Site VPN",
	"tags": [],
	"description": "",
	"content": "Mặc định từ bên ngoài có thể kết nối TTDL On-premise tới Amazon VPC sử dụng VPN cứng hoặc mềm tùy thuộc mục đích và nhu cầu sử dụng thực thế.\nCụ thể Amazon VPC cung cấp 2 cách để kết nối với môi trường mạng của doanh nghiệp đó là VPG and CGW.\n Virtual Private Gateway (VPG) là một trung tâm điều khiển kết nối the virtual private network (VPN) được cài đặt ở đầu AWS. A Customer Gateway (CGW) là thành phần đại diện cho thiết bị VPN cứng hoặc mềm được cài đặt ở đầu Khách hàng.  VPN tunnel sẽ được thiết lập ngay sau khi lưu lượng dữ liệu được truyền tải giữa AWS và hệ thống mạng của khách hàng. Trong kết nối đó, ta phải chỉ rõ loại định tuyến sẽ được sử dụng để đảm bảo an toàn cũng như chất lượng về mặt truyền tải dữ liệu.\nNếu CGW ở phía khách hàng có hỗ trợ Border Gateway Protocol (BGP), thì trong cấu hình VPN connection ta bắt buộc phải đặt định tuyến là dynamic routing.\nCòn ngược lại ta phải cấu hình định tuyến kết nối là static routing. Trường hợp sử dụng static routing, ta phải nhập chính xác những định tuyến cần thiết cho việc kết nối từ phía Khách hàng tới VPG được thiết lập ở đầu AWS. Đồng thời định tuyến cho VPC cũng phải được cấu hình propagated để cho phép các tài nguyên có thể trao đổi dữ liệu đi ra và đi vào trong kết nối VPN tunnel giữa AWS với hệ thống mạng của Khách hàng\nAmazon VPC cung cấp nhiều loại CGWs, và từng CGW được gán với một VPG nhưng 1 VPG có thể kết hợp với nhiều CGW (many-to-one design). Để hỗ trợ mô hình này thì địa chỉ IP của CGW phải là duy nhất trong một region.\nAmazon VPC cũng cung cấp các thông tin cần thiết cho Nhân viên quản trị mnagj có thể cấu hình CGW và thiết lập kết nối VPN tới VPG trên AWS. Kết nối VPN luôn bao gồm 2 Internet Protocol Security (IPSec) tunnels để đảm bảo tính sẵn sàng cao của kết nối.\nBên dưới là những đặc điểm quan trọng mà ta cần nắm về VPG, CGW, and VPN:\n VPG là thành phần đầu cuối của VPN tunnel nằm trên AWS. CGW có thể là thiết bị phần cứng hoặc ứng dụng phần mềm nằm ở đầu Khách hàng trong kết nối VPN tunnel. Bạn phải khởi tạo kết nối VPN tunnel từ CGW tới VPG. VPG hỗ trợ cả dynamic routing (BGP) và static routing. Kết nối VPN luôn có 2 tunnels nhằm đảm bảo tính sẵn sàng cao cho kết nối với VPC từ site Khách hàng.  Bài lab giúp chúng ta học được cách thiết lập một kết nối Site to Site VPN trong AWS. Trong thực tế, giải pháp này khá được ưa chuộng do ưu điểm giá thành rẻ, đồng thời rất dễ cấu hình do AWS cung cấp hướng dẫn cho từng loại thiết bị phía đầu Customer. Việc Cust bận tâm duy nhất đó là chuẩn bị đường internet để từ đó tạo đường hầm an toàn bí mật (sử dụng ipsec) kết nối tới AWS thông qua AWS VPN tunnel.\nTrong phạm vi bài lab, giả lập rằng chúng ta có Main office và Branch office đặt tại 2 VPC thuộc 2 AZ khác nhau để có sự khác biệt về mặt network. Trên mỗi VPC thực hiện tạo 2 EC2 cho phép SSH từ bên ngoài, nhưng không có khả năng kết nối và ping lẫn nhau sử dụng địa chỉ Private IP của mỗi EC2. Việc ta cần làm là cấu hình VPN để các địa chỉ Private IP có thể ping được lẫn nhau sử dụng VPN Site-to-Site.\nNội dung:\n 1. Cấu hình Network 2. Cấu hình Site to Site VPN tại Main office 3. Test ping từ Pub-Linux tới Pub-Linux-Bra và ngược lại  "
},
{
	"uri": "/vi/1-create-vpc/3-create-internet-gw/",
	"title": "Internet Gateway",
	"tags": [],
	"description": "",
	"content": "Internet Gateway (IGW) là một thành phần Amazon VPC giúp các tài nguyên bên trong VPC, cụ thể là EC2, có khả năng giao tiếp với Internet. IGW có khả năng co giãn mạnh theo chiều ngang, đồng thời tính dự phòng và sẵn sàng cao. Nó hoạt động như một target trong bảng Địnhtuyến của Amazon VPC, giúp lưu lượng truy cập được định tuyến ra ngoài Internet bằng cách biên dịch địa chỉ mạng của EC2 thành địa chỉ Public IP đã được gán cho nó.\nCụ thể hơn, các EC2 Instance bên trong VPC chỉ biết các địa chỉ Private IP được gán cho nó, nhưng khi có lưu lượng được gửi từ EC2 ra ngoài Internet, IGW sẽ biên dịch địa chỉ Private IP đó thành địa chỉ Public IP (hoặc địa chỉ EIP, sẽ thảo luận sau) mà gán với EC2, và duy trì mapping 1-1 cho tới khi địa chỉ Public IP bị release. Khi EC2 nhận được lưu lượng truy cập từ bên ngoài Internet, IGW sẽ thực hiện dịch địa chỉ Target (địa chỉ Public IP) thành địa chỉ Private IP của EC2 Instance và chuyển tiếp lưu lượng truy cập đến Amazon VPC.\n"
},
{
	"uri": "/vi/2-vpc-security-basic/3-setup-site-to-site-vpn/3-testing/",
	"title": "Kiểm tra Hoạt động",
	"tags": [],
	"description": "",
	"content": "Nội dung:\n Test ping từ Private EC2 tới Private Server Onprem  Test ping từ Private EC2 tới Private Server Onprem Hãy thử thực hiện lệnh ping từ phía máy chủ trên AWS xuống máy chủ ở phía On-premise của bạn. Sau khi thiết lập đường VPN thì chúng đã có thể thấy được nhau.\n"
},
{
	"uri": "/vi/1-create-vpc/4-create-natgw/",
	"title": "NAT Gateway",
	"tags": [],
	"description": "",
	"content": "Mặc định, mọi EC2 chạy bên trong Private subnet thì sẽ không có khả năng giao tiếp với Internet thông qua IGW. Từ đó vấn đề phát sinh khi EC2 đó cần truy cập ra ngoài Internet để áp dụng các bản cập nhật bảo mật, tải xuống các bản vá hoặc cập nhật phần mềm ứng dụng.\nNắm bắt được nhu cầu đó, AWS cung cấp 2 phương thức cho phép các EC2 bên trong Private subnet có quyền được truy cập Internet, đó là NAT Instance và NAT Gateway. Với các trường hợp thông thường, thì ta nên sử dụng NAT Gateway thay cho NAT Instance. NAT Gateway đảm bảo tính sẵn sàng và băng thông cao hơn, đồng thời đòi hỏi ít nỗ lực quản trị hơn so với NAT Instance.\nĐể tạo một một NAT gateway, ta phải chỉ định một mạng con (public) và một địa chỉ Elastic IP. Cần đảm bảo địa chỉ Elastic IP đang không được liên kết với bất cứ Instance hoặc một Network interface nào khác.\nTrường hợp ta muốn migrate từ NAT instance sang NAT gateway, ta có thể sử dụng lại địa chỉ Elastic IP của NAT instance. Nhưng trước hết ta cần phải tách địa chỉ IP ra khỏi NAT Instance.\n"
},
{
	"uri": "/vi/1-create-vpc/5-build-simple-lab/",
	"title": "Thực hành Cơ bản",
	"tags": [],
	"description": "",
	"content": "Xuyên suốt bài thực hành này, chúng ta sẽ xây dựng một mô hình theo sơ đồ bên dưới:\nNội dung:\n Bước 1. Tạo một Amazon Virtual Private Cloud (VPC) Bước 2. Tạo một Private subnet Bước 3. Tạo các Public subnet Bước 4. Tạo một Internet gateway Bước 5. Tạo một Route Table và added a route to the Internet Bước 6. Tạo Security group cho các VM nằm trong Public \u0026amp; Private subnet Bước 7. Tạo EC2 nằm trong Public subnet Bước 8. Tạo EC2 nằm trong Private subnet Bước 9. Test ping và SSH tới PUB-LINUX từ Internet Bước 10. Test ping và SSH tới PRI-LINUX từ PUB-LINUX Bước 11. Tạo một địa chỉ Elastic IP Bước 12. Tạo một NAT Gateway Bước 13. Test ping tới internet từ PRI-LINUX  Bước 1. Tạo một Amazon Virtual Private Cloud (VPC)  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trong navigation pane, Chọn Your VPCs, Create VPC.  Name tag: VPC-MAIN-ASG IPv4 CIDR block: 10.1.0.0/16    Bước 2. Tạo một Private subnet  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Subnets. Chọn Create Subnet.  Name tag: PRISUB-MAIN-ASG VPC: VPC-MAIN-ASG Availability Zone: us-west-1b IPv4 CIDR block: 10.1.3.0/24 Chọn Yes, Create    Bước 3. Tạo các Public subnet  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Subnets. Chọn Create Subnet.  Name tag: PUBSUB1-MAIN-ASG VPC: VPC-MAIN-ASG Availability Zone: us-west-1a IPv4 CIDR block: 10.1.1.0/24 Chọn Yes, Create    Sau đó ta thực hiện tạo Public subnet thứ 2 cho NAT Gateway\n Chọn Create Subnet.  Name tag: PUBSUB2-MAIN-ASG VPC: VPC-MAIN-ASG Availability Zone: us-west-1a IPv4 CIDR block: 10.1.2.0/24 Chọn Yes, Create    Trên trang VPC consle\n Lần lượt thực hiện với PUBSUB1-MAIN-ASG và PUBSUB2-MAIN-ASG Chọn Action, Modify auto-assign IP settings Bấm Enable auto-assign public IPv4 address và Chọn Save, Close.  Bước 4. Tạo một Internet gateway  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Internet Gateways, Create Internet Gateways  Name tag: IGW-MAIN-ASG Chọn Create, Close   Bấm IGW-MAIN-ASG, Chọn Action sau đó Attach to VPC  VPC: VPC-MAIN-ASG    Bước 5. Tạo một Route Table và added a route to the Internet  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Route Tables, Create Route Table  Name tag: RT-MAIN-ASG VPC: VPC-MAIN-ASG Chọn Create, Close   Bấm RT-MAIN-ASG, Chọn Action rồi Edit Route Chọn Add Route  Destination: 0.0.0.0/0 Target: IGW-MAIN-ASG Chọn Save Route   Tiếp tục bấm on Action, rồi Edit Subnet Association Bấm PUBSUB1-MAIN-ASG và PUBSUB2-MAIN-ASG, sau đó bấm on Save  Bước 6. Tạo Security group cho các VM nằm trong Public \u0026amp; Private subnet Đầu tiên, thực hiện tạo Security group cho Public Subnet\n Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Security Group, Create Security Group  Security group name: SG-PUB-MAIN-ASG Description Info: security for public subnet VPC: VPC-MAIN-ASG   Trong Inbound rules, bấm Add rules  Type: SSH, Source: My IP Type: Custom ICMP v4, Source: Anywhere Type: Custom ICMP 64, Source: Anywhere Sau đó bấm Create Security Group    Tiếp theo, thực hiện tạo Security group cho Private subnet\n Trên thanh điều hướng bên trái, chọn Security Group, Create Security Group  Security group name: SG-PRI-MAIN-ASG Description Info: security for private subnet VPC: VPC-MAIN-ASG   Trong Inbound rules, bấm Add rules  Type: SSH, Source: SG-PUB-MAIN-ASG Type: Custom ICMP v4, Source: Anywhere Type: Custom ICMP 64, Source: Anywhere Sau đó bấm Create Security Group    Bước 7. Tạo EC2 nằm trong Public subnet  Truy cập Amazon EC2 console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Intances, Launch Intance Step 1: Chọn an Amazon Machine Image (AMI): Amazon Linux 2 AMI (HVM), SSD Volume Type Step 2: Chọn an Instance Type: General purpose t2.nano, sau đó Next: Configure Instance Details Step 3: Configure Instance Details  Network: VPC-MAIN-ASG Subnet: PUBSUB1-MAIN-ASG Auto-assign Public IP: Enable   Sau đó bấm Next: Add Storage, Next: Add Tags Step 5: Add Tags, Chọn Add Tag  Key: Name Value: PUB-LINUX   Sau đó bấm Next: Configure Security Group Step 6: Configure Security Group  Assign a security group: Bấm an existing security group Name: SG-PUB-MAIN-ASG   Sau đó bấm Review và Launch, Launch Một prompt Choose an existing key pair or Create new key pair xuất hiện, chọn Create a new key pair  Key pair name: awskey   Chọn View Instance và chờ cho tới khi EC2 khởi tạo xong  Bước 8. Tạo EC2 nằm trong Private subnet  Truy cập Amazon EC2 console tại địa chỉ https://console.aws.amazon.com/ec2/ Trên thanh điều hướng bên trái, chọn Intances, Launch Intance Step 1: Chọn an Amazon Machine Image (AMI): Amazon Linux 2 AMI (HVM), SSD Volume Type Step 2: Chọn an Instance Type: General purpose t2.nano, sau đó Next: Configure Instance Details Step 3: Configure Instance Details  Network: VPC-MAIN-ASG Subnet: PRISUB-MAIN-ASG Auto-assign Public IP: Disable   Sau đó bấm Next: Add Storage, Next: Add Tags Step 5: Add Tags, Chọn Add Tag  Key: Name Value: PRI-LINUX   Sau đó bấm Next: Configure Security Group Step 6: Configure Security Group  Assign a security group: Bấm an existing security group Name: SG-PRI-MAIN-ASG   Sau đó bấm Review và Launch, Launch Một prompt Choose an existing key pair or Create new key pair xuất hiện, Chọn Choose an existing key pair  Key pair name: awskey   Chọn View Instance và chờ cho tới khi EC2 khởi tạo xong  Bước 9. Test ping và SSH tới PUB-LINUX từ Internet Bước 10. Test ping và SSH tới PRI-LINUX từ PUB-LINUX Tại thời điểm này, PRI-LINUX vẫn chưa có khả năng kết nối ra bên ngoài internet do chúng ta chưa cấu hình NAT GW\nBước 11. Tạo một địa chỉ Elastic IP  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn Elastic IPs Chọn Allocate Elastic IP address  Elastic IP address settings: Amazon's pool of IPv4 addresses Chọn Allocate Địa chỉ Public IP Address:3.101.0.64    Bước 12. Tạo một NAT Gateway  Truy cập Amazon VPC console tại địa chỉ https://console.aws.amazon.com/vpc/ Trên thanh điều hướng bên trái, chọn NAT Gateways. Chọn Create NAT Gateway.  Subnet: PUBSUB2-MAIN-ASG Elastic IP Allocation ID: 3.101.0.64   Chọn Add Tag  Key: Name Value: NAT-MAIN-ASG   Chọn Tạo một NAT Gateway Chọn Edit Route Table, Create Route Table  Name tag: RT-NAT-ASG VPC: VPC-MAIN-ASG Chọn Create, Close   Bấm RT-NAT-ASG, Chọn Action rồi Edit Route Chọn Add Route  Destination: 0.0.0.0/0 Target: NAT-MAIN-ASG Chọn Save Route   Tiếp tục bấm vào Action, sau đó Edit Subnet Association Bấm PRISUB-MAIN-ASG, rồi bấm Save  Bước 13. Test ping tới internet từ PRI-LINUX Kết quả cuối cùng của chúng ta:\n"
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]